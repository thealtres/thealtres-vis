{{/* Get site logo. */}}
{{ $show_logo := site.Params.header.navbar.show_logo | default true }}
{{ $has_logo := fileExists "assets/media/logo.png" | or (fileExists "assets/media/logo.svg") }}
{{ $logo := "" }}
{{ if $has_logo }}
  {{ $logo = (partial "blox-core/functions/get_logo" (dict "constraint" "max_height" "size" 70)) }}
{{ end }}

<div id="loader"></div>

<div id="map-overlay">
    <div id="map"></div>
    <div id="map-filter-window">
        <i id="map-filter-window-close-btn" class="fa-solid fa-times pointer" rel="tooltip" title="Close Map"></i>
        <div id="map-filter-window-header">
            <h2 class="map-filter-title">Filters</h2>
        </div>
        <div id="map-filter-window-content">
            <div id="map-filter-window-lang">
                <h3 class="map-filter-label">Tradition</h3>
                <div id="map-filter-window-lang-values">
                    <div id="map-filter-window-lang-values-fre">
                        <span>fre</span>
                        <div class="map-filter-btn-container">
                            <button class="map-filter-btn" data-type="locations" data-lang="fre">
                                <span class="material-symbols-outlined">book</span>
                            </button>
                            <button class="map-filter-btn" data-type="settings" data-lang="fre">
                                <span class="material-symbols-outlined">theater_comedy</span>
                            </button>
                        </div>
                    </div>
                    <div id="map-filter-window-lang-values-ger">
                        <span>ger</span>
                        <div class="map-filter-btn-container">
                            <button class="map-filter-btn" data-type="locations" data-lang="ger">
                                <span class="material-symbols-outlined">book</span>
                            </button>
                            <button class="map-filter-btn" data-type="settings" data-lang="ger">
                                <span class="material-symbols-outlined">theater_comedy</span>
                            </button>
                        </div>
                    </div>
                    <div id="map-filter-window-lang-values-als">
                        <span>als</span>
                        <div class="map-filter-btn-container">
                            <button class="map-filter-btn" data-type="locations" data-lang="als">
                                <span class="material-symbols-outlined">book</span>
                            </button>
                            <button class="map-filter-btn" data-type="settings" data-lang="als">
                                <span class="material-symbols-outlined">theater_comedy</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="info-overlay">
    <div id="info">
        <h1>Information</h1>
        <div class="info-text">
            <p>Welcome to the <b>Thealtres visualization interface</b> — you can use it to filter, search and analyze data from the <a href="https://thealtres.pages.unistra.fr/" target="_blank">Thealtres project</a>.</p>
            <p>Use the <b>"Filters" panel</b> on the left and the top timeline to filter both plays and characters by various criteria. You can also search for specific plays and characters using the <b>search bar</b> in the respective panels.</p>
            <p>Click on a play's <i class="fa-solid fa-magnifying-glass"></i> icon to view its characters. Click on a character's <i class="fa-solid fa-magnifying-glass"></i> icon to view what play they appear in.</p>
            <p>Use the <b>"Charts" panel</b> and associated dropdown to view various graphs based on the filtered data.</p>
            <p>Click on the <i class="fa-solid fa-map"></i> icon in the top right corner to view the map of the plays' settings and locations.</p>
            <p>Click anywhere outside this popup to close it. Click on the <i class="fa-solid fa-circle-info"></i> icon in the top right corner to view this information again.</p>
            <hr>
            <p>Web app created by Enzo Doyen as part of an internship under the supervision of <a href="https://lilpa.unistra.fr/theme-1-lexiques-discours-et-transpositions/membres/enseignants-chercheurs/ruiz-fabo-pablo/" target="_blank">Pablo Ruiz Fabo</a>.</p>
            <p>For more information about the project, visit the <a href="https://thealtres.pages.unistra.fr/" target="_blank">Thealtres website</a>.</p>
        </div>
    </div>
</div>

<div id="vis-container">
    <div class="item filters">
        <div class="filter-header">
            <h2>Filters</h2>
            <i id="filter-reset-btn" class="fa-solid fa-undo pointer" rel="tooltip" title="Reset view"></i>
        </div>
        <div id="filter-list">
            <div id="filter-lang">
                <h3 class="filter-label">Tradition</h3>
                <div id="filter-lang-values"></div>
            </div>
            <div id="filter-gender">
                <h3 class="filter-label">Gender</h3>
                <div class="filter-gender-sub-header">
                    <div class="filter-gender-sub-char">
                        <i class="fa-solid fa-masks-theater" rel="tooltip" title="Characters"></i>
                        <div id="filter-gender-char-values"></div>
                    </div>
                    <div class="filter-gender-sub-author">
                        <i class="fa-solid fa-pencil" rel="tooltip" title="Authors"></i>
                        <div id="filter-gender-author-values"></div>
                    </div>
                </div>
            </div>
            <div id="filter-profession">
                <h3 class="filter-label">Profession</h3>
                <div id="filter-profession-values"></div>
            </div>
            <div id="filter-social-class">
                <h3 class="filter-label">Social Class</h3>
                <div id="filter-social-class-values"></div>
            </div>
            <div id="filter-genre">
                <h3 class="filter-label">Genre</h3>
                <div id="filter-genre-values"></div>
            </div>
            <h3 class="filter-label">Publisher</h3>
            <select id="select-pub" placeholder="Search publishers..." autocomplete="off">
                <option value="">Search publishers...</option>
            </select>
            <h3 class="filter-label">Author</h3>
            <select id="select-author" placeholder="Search authors..." autocomplete="off">
                <option value="">Search authors...</option>
            </select>
        </div>
    </div>
    <div class="item main-view">
        <div class="main-header">
            <div id="timeline"></div>
            <div id="header-btns">
                <div id="header-btns-left">
                    <i id="map-open-btn" class="fa-solid fa-map pointer" rel="tooltip" title="Show Map"></i>
                    <i id="download-btn" class="fa-solid fa-download pointer" rel="tooltip" title="Download Data"></i>
                    <i id="info-open-btn" class="fa-solid fa-circle-info pointer" rel="tooltip" title="Info"></i>
                </div>
                {{- if $has_logo -}}
                <a href="{{ site.BaseURL }}">
                    <img class="logo" src="{{ $logo.RelPermalink }}" alt="{{ site.Title }}"
                    {{with site.Params.header.image.width}}width="{{.}}"{{end}}
                    {{with site.Params.header.image.height}}height="{{.}}"{{end}}
                    rel="tooltip"
                    title="Go back to Thealtres website">
                </a>
                {{- else -}}
                    {{- site.Title -}}
                {{- end -}}
            </div>
        </div>
        <div class="results-view">
            <div class="item main-view-chars">
                <div class="char-header header">
                    <h2 class="char-header-heading">
                        <span class="char-header-text">Characters</span> <span class="char-progress"></span>
                    </h2>
                    <span class="header-info" name="header-info-char">
                        <input type="text" id="char-search-input" placeholder="Search…" autocomplete="off">
                        <select id="char-list-pagination"></select>
                        <span class="header-icons">
                            <i id="char-list-show-all-btn" class="fa-solid fa-list pointer" rel="tooltip" title="Show All"></i>
                        </span>
                    </span>
                </div>
                <table id="char-list" tabindex="0"></table>
            </div>
            <div class="item main-view-plays">
                <div class="item main-view-plays-chart">
                    <div class="chart-header header">
                        <h2 class="chart-header-heading">
                            <span class="chart-header-text">Charts</span>
                            <span class="chart-header-desc">(Click on a group's legend dot to toggle line)</span>
                        </h2>
                        <select id="chart-select-btn"></select>
                    </div>
                    <div id="chart"></div>
                </div>
                <div class="item main-view-plays-table">
                    <div class="play-header header">
                        <h2 class="play-header-heading">
                            <span class="play-header-text">Plays</span> <span class="play-progress"></span>
                        </h2>
                        <span class="header-info" name="header-info-play">
                            <input type="text" id="play-search-input" placeholder="Search…" autocomplete="off">
                            <select id="play-list-pagination"></select>
                            <span class="header-icons">
                                {{/*  <i id="play-list-sort-btn" class="fa-solid fa-sort sort-btn pointer" rel="tooltip" title="Sort by…"></i>  */}}
                            </span>
                        </span>
                    </div>
                    <div id="play-list" tabindex="0"></div>
                </div>
            </div>
        </div>
    </div>
</div>